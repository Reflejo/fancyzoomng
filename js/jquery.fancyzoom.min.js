jQuery.fn.fancyHide=function(){$(".zoom_close").click()};jQuery.fn.fancyZoom=function(q){var q=q||{};var m=q.directory||"images";var b=q.main_class||"";var e=false;var f=$.browser.msie?"gif":"png";var k=m+"/box."+f;var n=m+"/sides."+f;var p=$('<div class="zoom '+b+'" style="display: none; z-index: 10"><table class="zoom_table" style="border-collapse:collapse; width:100%; height:100%;"><tbody><tr><td style="background:url('+k+') 0 0 no-repeat; width:26px; height:26px; overflow:hidden;"></td><td style="background:url('+k+') 0 -52px repeat-x; height:26px; overflow:hidden;"></td><td style="background:url('+k+') 0 -110px no-repeat; width:26px; height:26px; overflow:hidden;"></td></tr><tr><td style="background:url('+n+') 0 0 repeat-y; width:26px; overflow:hidden;"></td><td style="background:#fff; vertical-align:top; padding:10px;" class="mainfz"><div class="zoom_content"></div></td><td style="background:url('+n+') -28px 0 repeat-y;  width:26px; overflow:hidden;"></td></tr><tr><td style="background:url('+k+') 0 -26px no-repeat; width:26px; height:26px; overflow:hidden;"></td><td style="background:url('+k+') 0 -78px repeat-x; height:26px; overflow:hidden;"></td><td style="background:url('+k+') 0 -136px no-repeat; width:26px; height:20px; overflow:hidden;"></td></tr></tbody></table><a href="#" title="Close" class="zoom_close" style="position:absolute; top:0px; left:0px;"><img src="'+m+'/closebox.png" alt="Close" style="border:none; margin:0; padding:0;"></td></a></div>');$("body").append(p);$("html").click(function(r){if(!$(r.target).hasClass("zoomed")&&$(".zoom:visible").length&&!$(r.target).parents(".zoom").length){l()}});$().keyup(function(r){if(r.keyCode==27&&$(".zoom:visible").length>0){l()}});$(".zoom_close").click(l);var j=$(".zoom_table");var i=$(".zoom_close");var h=$(".zoom_content");var a=$("td.ml,td.mm,td.mr");var c=function(t){$(".zoom_table td").each(function(v){var u=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,"."+t+'")');$(this).css("background-image",u)});var s=i.children("img");var r=s.attr("src").replace(/\.(png|gif|none)$/,"."+t);s.attr("src",r)};var g=function(){if($.browser.msie&&parseFloat($.browser.version)>=7){c("gif")}};var d=function(){if($.browser.msie&&$.browser.version>=7){c("png")}};function o(v,r){if(e||$(".zoom:visible").length){return false}e=true;var A=$('<div class="dimmer" style="position:absolute;top:0px"/>').height(Math.max($("body").height(),$(document).height()));var E=window.document;var C=window.pageXOffset||(E.documentElement.scrollLeft||E.body.scrollLeft);var B=window.pageYOffset||(E.documentElement.scrollTop||E.body.scrollTop);var w={width:$(window).width(),height:$(window).height(),x:C,y:B};var s=parseInt(q.width||r.width())+60;var F=parseInt(q.height||r.height())+60;h.height(F-120);var z=Math.max((w.height/2)-(F/2)+B,0);var D=(w.width/2)-(s/2);var t=v.pageY;var u=v.pageX;i.attr("curTop",t);i.attr("curLeft",u);i.attr("scaleImg",Boolean(q.scaleImg));$(p).hide().css({position:"absolute",top:t+"px",left:u+"px",width:"1px",height:"1px"});g();i.hide();if(q.closeOnClick){$(p).click(l)}if(q.scaleImg){h.html(r.html());$(".zoom_content img").css("width","100%")}else{h.empty()}$("body").append(A);$(p).animate({top:z+"px",left:D+"px",opacity:"show",width:s,height:F},500,null,function(){if(!q.scaleImg){if(q.url){if(!$(".zoom_indicator").length){h.append($('<div class="zoom_indicator"/>'))}$.ajax({url:q.url,success:function(x){h.html(x)}})}else{h.html(r.html())}}d();i.show();e=false});return false}function l(){if(e){return false}e=true;$(".dimmer").remove();$(p).unbind("click");g();if(i.attr("scaleImg")!="true"){h.empty()}i.hide();$(p).animate({top:i.attr("curTop")+"px",left:i.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){if(i.attr("scaleImg")=="true"){h.empty()}d();e=false});return false}this.each(function(r,t){var s=$(q.modal||$(t).attr("href")).hide();$(t).addClass("zoomed");$(t).click(function(u){return o(u,s)})});return this};